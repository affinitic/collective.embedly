*** Settings ***

Library  Selenium2Library  timeout=15  implicit_wait=0.5
Library  collective.embedly.testing_keywords.Keywords

Resource  plone/act/keywords.txt
#Resource  collection_keywords.txt

Variables  plone/app/testing/interfaces.py

#Suite Setup  Suite Setup
#Suite Teardown  Suite Teardown

Suite Setup  Open browser  ${front-page}

Suite Teardown  Close All Browsers


*** Variables ***

${front-page}  http://localhost:55001/plone/
${test-folder}  http://localhost:55001/plone/acceptance-test-folder
${install_form}  http://localhost:55001/plone/prefs_install_products_form

${PORT} =  55001
${ZOPE_URL} =  http://localhost:${PORT}
${PLONE_URL} =  ${ZOPE_URL}/plone
${BROWSER} =  Firefox


*** Test Cases ***

Test Create Page without Embedly
    Log in as site owner
    Go to  ${front-page}
    Add page  Without Embedly Page
    Click Edit In Edit Bar
#    selenium.type("dom=document.getElementById('text_ifr').contentDocument.body",'Test Embedly Text')
#    Input text  dom=document.getElementById('text_ifr').contentDocument.body  Test Embedly Text
    Click Link  Edit without visual editor
    Input text  text  <a class="external-link" href="http://www.youtube.com/watch?v=LBDtqdOG4Uc">Demo Video file from YouTube.</a>
    Click button  name=form.button.save
    Page Should Contain  Demo Video file from YouTube.
    Logout

Test Create Page with Embedly
    Log in as site owner
    Go to  ${install_form}
    Select Checkbox  id=collective.embedly
    Click Button  Activate
    Go to  ${front-page}
    Add page  With Embedly Page
    Click Edit In Edit Bar
#    selenium.type("dom=document.getElementById('text_ifr').contentDocument.body",'Test Embedly Text')
#    Input text  dom=document.getElementById('text_ifr').contentDocument.body  Test Embedly Text
    Click Link  Edit without visual editor
    Input text  text  <a class="embedlylink external-link" href="http://www.youtube.com/watch?v=LBDtqdOG4Uc">Demo Video file from YouTube.</a>
    Click button  name=form.button.save
    Page Should Not Contain  Demo Video file from YouTube.
    Logout

